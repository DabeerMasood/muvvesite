<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Sample FirebaseUI App</title>
       <script src="https://www.gstatic.com/firebasejs/3.6.2/firebase.js"></script>
<script>
  // Initialize Firebase
  // TODO: Replace with your project's customized code snippet
  var config = {
    apiKey: "AIzaSyCK_v-s-5I0aBllk6AtiOI1bvlfaBM5e5k",
    authDomain: "muvvefinal.firebaseapp.com",
    databaseURL: "https://muvvefinal.firebaseio.com",
    storageBucket: "<BUCKET>.appspot.com",
    messagingSenderId: "<SENDER_ID>",
  };
  firebase.initializeApp(config);
</script>
<script>
		  //var user = firebase.auth().currentUser;

    	function funct1(evt)
	{
 	 var title = $('#post-title').text();

  	var post = $('#post-content').text();
	firebase.database().ref('users/cho').set({
		username:"djalfk",
	});
	};
	var submit = document.getElementsByTagName('button')[0];

	submit.onclick = funct1;
  	});
	  </script>
    <script type="text/javascript">
      initApp = function() {
        firebase.auth().onAuthStateChanged(function(user) {
          if (user) {
            // User is signed in.
            var displayName = user.displayName;
            var email = user.email;
            var emailVerified = user.emailVerified;
            var photoURL = user.photoURL;
            var uid = user.uid;
            var providerData = user.providerData;
            user.getToken().then(function(accessToken) {
              //image
              var img = document.createElement("IMG");
              img.src = user.photoURL;
              document.getElementById('imageDiv').appendChild(img);
              //image end
              //name
              document.getElementById('Name').textContent = user.displayName;
              //name end
              //document.getElementById('sign-in-status').textContent = 'Signed in';
              //document.getElementById('sign-in').textContent = 'Sign out';
              /*document.getElementById('account-details').textContent = JSON.stringify({
                displayName: displayName,
                email: email,
                emailVerified: emailVerified,
                photoURL: photoURL,
                uid: uid,
                accessToken: accessToken,
                providerData: providerData
              }, null, '  ');*/
              
             
              
            });
		  
	
	
          } else {
            // User is signed out.
            document.getElementById('sign-in-status').textContent = 'Signed out';
            document.getElementById('sign-in').textContent = 'Sign in';
            document.getElementById('account-details').textContent = 'null';
          }
        }, function(error) {
          console.log(error);
        });
      };
      
      window.addEventListener('load', function() {
        initApp()
      });
    </script>
	  
    
    
  </head>
  <body>
    <h1>Muvve</h1>
    <!--<div id="sign-in-status"></div>
    <div id="sign-in"></div>
    <div id="account-details"></div>-->
    <h2>Welcomea</h2>
    <div id="Name"></div>
    <div id="imageDiv"></div>
    <div class="signup">
    <h2 class="signup-title">Sign up for beata</h2>
    <p id="signup-success" class="text-success"></p>
    <p id="signup-error" class="text-danger"></p>
    <!--<form>
        <div class="post-title">
            <input type="text" placeholder="Zip Code">
        </div>
        <div class="post-content">
            <textarea type="text" placeholder="Pace"></textarea>
        </div>
        <button type="submit" class="submit">Submit</button>
    </form>
</div>-->
	  		<div class="signup">
    <h2 class="signup-title">Sign up for beta</h2>
    <p id="signup-success" class="text-success"></p>
    <p id="signup-error" class="text-danger"></p>
    <form class="signup-form form-inline" id="signup-form" role="form" onsubmit="return signup(this)">
    	My Email:
        <input class="form-control" name="email" type="email" placeholder="Your email. eg., joe@acme.com" required>
        <br>
        My name:
        <input class = "form-control" name = "name" type = "name" placeholder = "your name." required>
        <br>
        My age:
        <input class = "form-control" name = "age" type = "age" placeholder = "your age" required>
        <br>
        My Zipcode:
        <input class = "form-control" name = "zip" type = "zip" placeholder = "your zipcode." required>
        <br>
        I wish I had someone to run with:
        <input class = "form-control" name = "wish" type = "radio" value="True">True
        <input class = "form-control" name = "wish" type = "radio" value = "False">False
        <br>
        Gender:
        <input class = "form-control" name = "gender" type = "radio" value= "Male" >Male
        <input class = "form-control" name = "gender" type = "radio" value= "Female">Female
        <button class="btn btn-success" id="signup-button" type="submit" >Join now</button>
    </form>

</div>
	  <script>
		  
				      var displayName = "test";
    var signupForm = document.getElementById('signup-form');
    var signupSuccess = document.getElementById('signup-success');
    var signupError = document.getElementById('signup-error');
    var signupBtn = document.getElementById('signup-button');
    var onSignupComplete = function(error) {
      signupBtn.disabled = false;
      if (error) {
        signupError.innerHTML = 'Sorry. Could not signup.';
      } else {
        signupSuccess.innerHTML = 'Thanks for signing up!';
        // hide the form
        signupForm.style.display = 'none';
      }
    };
    function signup(formObj) {
        // Store emails to firebase
	   
        firebase.database().ref('users/' + displayName).set({
        
          email: formObj.email.value,
          name: formObj.name.value,
          wish: formObj.wish.value,
          gender: formObj.gender.value,
          zip: formObj.zip.value,
          age: formObj.age.value,
        }, onSignupComplete);
        signupBtn.disabled = true;
        return false;
    }

		  firebase.auth().onAuthStateChanged(function(user) {
  if (user) {
    // User is signed in.
	  displayName = "do";
  } else {
    // No user is signed in.
  }
});
		  
		  
    
</script>
  </body>
</html>
